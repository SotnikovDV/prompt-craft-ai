---
description:
globs:
alwaysApply: true
---
# Практики и архитектура Laravel

## Работа с БД
- Eloquent для основной работы с моделями, QueryBuilder для сложных запросов
- Явно указывать поля в select()
- Использовать чанкование для больших наборов данных
- Применять softDeletes там, где необходим архив данных

## Валидация данных
- Всю валидацию выносить в Form Request
- При сложной бизнес-логике — отдельные Request и Rules

## Маршруты и контроллеры
- Сгруппировать роуты по middleware (auth, api, web)
- Для API — использовать Route::apiResource, для CRUD Route::resource

## Кэширование и производительность
- Тяжёлые запросы кэшировать минимум на час
- Использовать тегированный кэш и remember()

## Миграции и сиды
- Migrации должны быть идемпотентны
- Seeder — только для тестовых / начальных данных

## Тесты и безопасность
- Использовать Pest для современных тестов API и контроллеров
- Проверять CSRF, XSS и SQL injection через регулярные ревью

## Документация
- Записывать каждый endpoint в Postman/Swagger (по мере реализации)
- Документировать каждый публичный метод у моделей и сервисов
